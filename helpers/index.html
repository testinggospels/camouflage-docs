<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Helpers - Camouflage Service Virtualization</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Helpers";
        var mkdocs_page_input_path = "helpers.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Camouflage Service Virtualization
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Camouflage Service Virtualization</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting Started</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Helpers</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#array-helper">array Helper</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#assign-helper">assign Helper</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#concat-helper">concat Helper</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#csv-helper">csv helper</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#import-helper">import Helper</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#inject-helper">inject Helper</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#is-helper">is Helper</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#now-helper">now Helper</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#num_between-helper">num_between Helper</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#random-helper">random Helper</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../http/">HTTP</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../grpc/">GRPC</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Camouflage Service Virtualization</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Helpers</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="helpers">Helpers</h1>
<p>Camouflage uses handlebars to help you generate dynamic responses if needed. Read more about handlebars <a href="https://handlebarsjs.com/guide/">here</a>.</p>
<p>You can use all the helpers provided by handlebars itself, for example, <code>if</code>, <code>unless</code>, <code>each</code>, and <code>with</code>. Camouflage also provides some additional helpers to make some repetitive tasks easy.</p>
<h3 id="array-helper"><code>array</code> Helper</h3>
<p>Usage:</p>
<p><strong>{{array source='Apple,Banana,Mango,Kiwi' delimiter=','}}</strong>: Generate an array from a source using given delimiter.</p>
<h3 id="assign-helper"><code>assign</code> Helper</h3>
<p>Usage: Assign helper can be used to assign a value to a variable, by specifying a name value pair. This can be useful specially when using capture helper using regex and jsonpath selectors. Since running a regex or jsonpath operation is an expensive task, assign helper can be used to capture a value once, store it in a variable and use throughout the mock file. Aesthetically, it also improves readability of the mock file which otherwise would contain long illegible regular expressions repeated throughout the mock file.</p>
<p>Following example shows the usage of a complex combination of helpers, i.e. assign, array, concat, and code.</p>
<pre><code class="language-javascript">{{assign name='fruits' value=(array source=(concat 'Apple' 'Kiwi' 'Oranges' delimiter='-') delimiter='-')}}
{{#each fruits as |fruit|}}{{#if @last}}{{fruit}}{{else}}{{fruit}}-{{/if}}{{/each}}
</code></pre>
<p>Explanation:</p>
<ol>
<li><code>concat</code>: We are using <code>concat</code> to make a hyphenated string out of 3 seperate string values.</li>
<li><code>array</code>: Then we are making an array by splitting the hyphenated string using the hyphen delimiter. Because why not?</li>
<li><code>assign</code>: Next, we assign this monstrous redundancy to a variable <code>fruits</code></li>
<li><code>each</code>: Next use the helper <code>each</code> to loop over the <code>fruits</code> array.</li>
<li><code>if</code>: Finally, we use <code>if</code> helper, to make a beautiful string. We concatenate the fruits with a hyphen (if the current fruit is not the last item in the array).</li>
</ol>
<p><em>Phew, that was quite a journey. We started with 'Apple-Kiwi-Oranges' and we ended it with 'Apple-Kiwi-Oranges'....wait a minute!</em></p>
<h3 id="concat-helper"><code>concat</code> Helper</h3>
<p>Usage: Concatenates multiple strings together, (static or dynamic), to form a single string.</p>
<p>Example:</p>
<ul>
<li><code>{{concat 'Camouflage ' 'is ' 'easy!!'}}</code> results in <code>Camouflage is easy</code>.</li>
<li>You can also pass in a delimiter, i.e. <code>{{concat '1' '22' '333' delimiter='-'}}</code> will result in <code>1-22-333</code></li>
</ul>
<h3 id="csv-helper"><code>csv</code> helper</h3>
<p>Usage: CSV Helper allows you to provide a data source as an input along with several combinations of selection policies</p>
<ul>
<li><strong>With a key and value</strong>: Specify the column name with <code>key</code> and the value you want to search with <code>value</code>. CSV helper returns the first row of the csv file where the value matches the row value in the specified column.</li>
<li><strong>Random</strong>: Omitting key and value altogether and specifying <code>random=true</code> will fetch you one row at random.</li>
<li><strong>All</strong>: Specifying <code>all=true</code>, fetches you the entire CSV file, do what you will with the data.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All combinations of the policies return a JSON Array</p>
</div>
<h3 id="import-helper"><code>import</code> Helper</h3>
<p>Usage: Import helpers lets you store your reusable templates in shared files, which can then be imported into other files.</p>
<p>Example:</p>
<p>You can create a camouflage mock file which would contain the response for the request <code>GET /hello/world</code></p>
<pre><code>HTTP/1.1 200 OK
Content-Type: application/json

{
    &quot;now&quot;: &quot;{{import path=&quot;/User/john.doe/uselessButReusableNow.mock&quot;}}&quot;
}
</code></pre>
<p>Here you are importing the file <code>uselessButResuableNow.mock</code>, camouflage helper will replace the import with the contents of your imported file. You can create the reusable file as</p>
<pre><code>{{now format='yyyy-MM-dd'}}
</code></pre>
<p>This seems trivial and of no use but think bigger. Your mock file contains not just one but several responses and you select one of them based on a certain condition. You can break down your mocks into several files and import them as needed, making it easier to maintain.</p>
<h3 id="inject-helper"><code>inject</code> Helper</h3>
<p><strong>Time for the forbidden fruit! The security vulnerability. Everything you have been taught not to do.</strong></p>
<p>Inject helper allows you replace the hard coded values in your mock files with a javascript code, when you still want to use Camouflage's response builder but you want control over one or two fields.</p>
<p>Example:</p>
<pre><code class="language-json">{
    &quot;phone&quot;: {{#inject}}(()=&gt;{ return Math.floor(1000000000 + Math.random() * 9000000000); })();{{/inject}}
}
</code></pre>
<p>This translates to a random 10 digit number. <em>Is it a phone number? Is it not? Who knows!</em></p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p><code>inject</code> helper is not enabled by default. If you want to use inject helper, you'd have to enable it when you are creating the helper object.</p>
<p><code>const helpers = new Helpers(true) // setting injectionAllowed = true</code></p>
</div>
<h3 id="is-helper"><code>is</code> Helper</h3>
<p>Credits: <a href="https://github.com/danharper/Handlebars-Helpers">danharper/Handlebars-Helpers</a></p>
<p>Usage: <code>is</code> helper can be considered as an extension of <code>if</code> which allows you to evaluate conditions that are lacking in inbuilt helper.</p>
<p><code>is</code> can be used in following three ways:</p>
<ul>
<li>With one argument: <code>is</code> acts exactly like <code>if</code></li>
</ul>
<p><code>{{#is x}} ... {{else}} ... {{/is}}</code></p>
<ul>
<li>With two arguments: is compares the two are equal (a non-strict, == comparison, so 5 == '5' is true)</li>
</ul>
<p><code>{{#is x y}} ... {{else}} ... {{/is}}</code></p>
<ul>
<li>With three arguments: the second argument becomes the comparator.</li>
</ul>
<p><code>{{#is x "not" y}} ... {{else}} ... {{/is}}
  {{#is 5 "&gt;=" 2}} ... {{else}} ... {{/is}}</code></p>
<p>Accepted operators are:</p>
<ul>
<li>== (same as not providing a comparator)</li>
<li>!=</li>
<li>not (alias for !=)</li>
<li>===</li>
<li>!==</li>
<li>&gt;</li>
<li>&gt;=</li>
<li>&lt;</li>
<li>&lt;=</li>
<li>in (to check if a value exists in an array. ex: {{#is 'John' in (capture from='body' using='jsonpath' selector='$.names')}})</li>
</ul>
<h3 id="now-helper"><code>now</code> Helper</h3>
<p>Usage:</p>
<ol>
<li><strong>{{now}}</strong> - Simply using now will give you date in format YYYY-MM-DD hh:mm:ss</li>
<li><strong>{{now format='MM/DD/YYYY'}}</strong> - Format not to your liking? We use luxon to handle date/time, you can provide any format that's supported by luxon. Read more <a href="https://moment.github.io/luxon/#/formatting?id=table-of-tokens">here</a>.</li>
<li><strong>{{now format='epoch'}}</strong> - Time since epoch in milliseconds</li>
<li><strong>{{now format='unix'}}</strong> - Time since epoch in seconds</li>
<li><strong>{{now format='MM/DD/YYYY hh:mm:ss' offset='-10 days'}}</strong> - Use offset to specify the delta for your desired date from the current date.</li>
</ol>
<h3 id="num_between-helper"><code>num_between</code> Helper</h3>
<p>Usage:</p>
<ul>
<li><strong>{{num_between lower=500 upper=600}}</strong>: Generate a random number between two values.</li>
<li><strong>{{num_between lower=500 upper=600 lognormal=true}}</strong>: Generate random numbers on a bell curve centered between two values.</li>
</ul>
<h3 id="random-helper"><code>random</code> Helper</h3>
<p>Usage:</p>
<ul>
<li><strong>{{random}}</strong> - Simply using randomValue will generate a 16 character alphanumeric string. ex: <em>9ZeBvHW5viiYuWRa</em>.</li>
<li><strong>{{random type='ALPHANUMERIC'}}</strong> - You can specify a type as well. Your choices are: 'ALPHANUMERIC', 'ALPHABETIC', 'NUMERIC' and 'UUID'.</li>
<li><strong>{{random type='NUMERIC' length=10}}</strong> - Don't want a 16 character output? Use length to specify the length.</li>
<li><strong>{{random type='ALPHABETIC' uppercase=true}}</strong> - Finally, specify uppercase as true to get a, well, uppercase string.</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../getting-started/" class="btn btn-neutral float-left" title="Getting Started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../http/" class="btn btn-neutral float-right" title="HTTP">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../getting-started/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../http/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
